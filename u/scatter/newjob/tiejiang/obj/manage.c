//NPC GENERATED BY CHEAP
//QUESTION GENERATED BY HOPEFUL
//CODE BY SCATTER
//V. 2.0

#include <ansi.h>
inherit NPC;

int ask_question();
int do_da(string arg);
//int accept_kill();
int do_enter();

string kans;

void create()
{
        set_name("陆大福",({"manage"}));
        set("title",HIC"矿场总管"NOR);
        set("age",40);
        set("gender","男性");
        set("long", "他是矿场的总管，矿场里的大小事务都是由他来管理，人人都叫他陆总管。 \n");
        set("inquiry", ([
                        "挖矿" : (: ask_question :),
        ]) );


     setup();
     carry_object("/clone/armor/cloth")->wear();
}


int accept_kill()
{
        object me = this_player();
        object obj = this_player();  
        if (obj->is_killing(this_object()) ) return 1;
                
                command("chat 既然"+obj->query("name")+"想跟我过几招，那我就只有奉陪了。");
                obj->start_busy(10);  
                message_vision(HIW"陆大福使出他自创的招式, 围绕$N疾转几圈，刹那间点中了$N的周身八处大穴。\n"NOR, me);
                message_vision(HIR"顿时间$N感到眼前一黑, 似乎便要陷入昏迷。\n突然陆大幅绕到$N身后一指点中$N的龙穴, 也就是所谓的死穴。\n"NOR, me);
                message_vision(HIG"陆大福轻轻一纵,跳出战圈，双眼合闭。\n"NOR, me);
                message_vision(HIC"但见$N站在那边, 浑身上下一动不动，不知生死。突然, 碰的一声，倒在地下。\n\n"NOR, me);
                me->unconcious();
                me->add("qi", -53);
                me->add("jing", -53);
                me->add("jingli", -53);

}

void init()
{
        ::init();
//              add_action("accept_kill", "kill");
//              add_action("accept_kill", "hit");
                add_action("do_enter", "enter");
}

int do_enter()
{
        object me = this_player();

        if( !me->query_temp("kuangchang/enter") );
                return notify_fail("陆大福挡在$N的面前说到：先回答问题吧！");

        
        me->delete_temp("kuangchang/enter");
        message_vision(NOR"$N往里面走了过去．\n"NOR, me);
        me->move("/newjob/tiejiang/kuangchang");

        return 1;
}


int ask_question()
{
     object me = this_player();
     if(me->query_temp("kans"))
         return notify_fail("还始先回答上一题吧！");

     message_vision(HIW"陆大福说道；好，挖矿可以，可你要先回答我一个问题才可以挖矿\n\n用 (da answer) 来回答\n\n"NOR, me);

     switch( random(19) )
     {
             case 0:
                  message_vision(HIG"陆大福问道；请问挖矿是否要工具?\n"NOR, me);
                  message_vision(HIY"1) 要    2) 不要\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "1";
                  break;
             case 1:
                  message_vision(HIG"陆大福问道；请问挖矿是否有 busy time?\n"NOR, me);
                  message_vision(HIY"1) 有    2) 没有\n"NOR, me);
                  kans = "1";
                  me->set_temp("kans", 1);
                  break;
             case 2:
                  message_vision(HIG"陆大福问道；请问挖矿会 - (waste) 精力, 内力, 精, 划 气吗?\n"NOR, me);
                  message_vision(HIY"1) 会    2) 不会\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "1";
                  break;
             case 3:
                  message_vision(HIG"陆大福问道；请问挖矿会有特别事法生? 工具会断?\n"NOR, me);
                  message_vision(HIY"1) 会    2) 不会\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "1";
                  break;
             case 4:
                  message_vision(HIG"陆大福问道；请问如果挖成矿会有什么?\n"NOR, me);
                  message_vision(HIY"1) 宝剑    2) 石人   3) 矿    4) 金沙\n"NOR, me);

                  me->set_temp("kans", 1);
                  break;
             case 5:
                  message_vision(HIG"陆大福问道；请问谁才可以挖矿?\n"NOR, me);
                  message_vision(HIY"1) 男性    2) 女性    3) 以上皆是\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "3";
                  break;
             case 6:
                  message_vision(HIG"陆大福问道；请问挖矿有没有条件? ( 例如要多少经验 )\n"NOR, me);
                  message_vision(HIY"1) 有    2) 没有\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "1";
                  break;
             case 7:
                  message_vision(HIG"陆大福问道；请问在哪理挖矿?\n"NOR, me);
                  message_vision(HIY"1) 矿场    2) 密林    3) 树林   4) 山路\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "1";
                  break;
             case 8:
                  message_vision(HIG"陆大福问道；请问什么时候才可以去挖矿?\n"NOR, me);
                  message_vision(HIY"1) 晚上    2) 早上    3) 晚上和早上\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "3";
                  break;
             case 9:
                  message_vision(HIG"陆大福问道；请问要用什么来挖矿?\n"NOR, me);
                  message_vision(HIY"1) 令牌    2) 木支    3) 剑    4) 枪   5) 以上皆非\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "5";
                  break;
             case 10:
                  message_vision(HIG"陆大福问道；请问一人可以挖己多次矿?\n"NOR, me);
                  message_vision(HIY"1) 一次    2) 十次    3) 五次    4) 无限制\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "4";
                  break;
             case 11:
                  message_vision(HIG"陆大福问道；请问挖矿是不是次次都会成功?\n"NOR, me);
                  message_vision(HIY"1) 是    2) 不是\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "2";
                  break;
             case 12:
                  message_vision(HIG"陆大福问道；请问是用什么指令来挖矿?\n"NOR, me);

                  me->set_temp("kans", 1);
                  kans = "1";
                  break;
             case 13:
                  message_vision(HIG"陆大福问道；请问挖矿有没有难度?\n"NOR, me);
                  message_vision(HIY"1) 有    2) 没有\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "1";
                  break;
             case 14:
                  message_vision(HIG"陆大福问道；请问要什么来拿矿?\n"NOR, me);
                  message_vision(HIY"1) 矿车    2) 用手    3) 依服    4) 飞机\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "1";
                  break;
             case 15:
                  message_vision(HIG"陆大福问道；请问挖矿是用来做什么的?\n"NOR, me);
                  message_vision(HIY"1) 武器    2) 依服    3) 水果    4) 房屋\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "1";
                  break;
             case 16:
                  message_vision(HIG"陆大福问道；请问男和女挖矿有分别吗?\n"NOR, me);
                  message_vision(HIY"1) 有    2) 没有\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "2";
                  break;
             case 17:
                  message_vision(HIG"陆大福问道；请问挖矿会加 exp 吗?\n"NOR, me);
                  message_vision(HIY"1) 会    2) 不会\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "1";
                  break;
             case 18:
                  message_vision(HIG"陆大福问道；请问挖矿会加 knowledge 吗?\n"NOR, me);
                  message_vision(HIY"1) 会    2) 不会\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "2";
                  break;
             case 19:
                  message_vision(HIG"陆大福问道；请问挖矿要矿车吗?\n"NOR, me);
                  message_vision(HIY"1) 要    2) 不要\n"NOR, me);
                  me->set_temp("kans", 1);
                  kans = "2";
                  break;
        }
        
    
     add_action("do_da", "da");
     add_action("do_da", "answer");
     return 1;

}


int do_da(string arg)
{
        object me = this_player();
        if( !arg )
                return notify_fail("你要答什么呀？\n");
        if( !me->query_temp("kans") )
                return notify_fail("你要答什么呀？\n");
        if( arg == kans )
                {
            message_vision(HIG"陆大福双手抱拳，讨好地对$N说道：在下对壮士的景仰之情，有如滔滔江水连绵不绝。。\n"NOR, me);
            message_vision(HIG"陆大福说道；$N真是可造之才呀。\n"NOR, me);
            me->add_temp("kuangchang/enter");
            me->delete_temp("kans", 1);
            return 1;
                }
        
        else if( arg != kans )
                {
        
            message_vision(HIG"陆大福皱了皱眉，似乎想$N说些什么。\n"NOR, me);
            message_vision(HIG"陆大福很生气的对$N说道；错！！\n"NOR, me);
            me->delete_temp("kans", 1);
            return 1;
                }
}
