 // Code By Scatter
// 玄铁
// xuantie.c
// V. 1.01



inherit F_DBASE
inherit F_SSERVER
//inherit F_CLEAN_UP

//void remove_effect(object me, int amount)

int perform(object me, object target)
{
        object weapon
        int skill, skill1
        int myskill
        string msg

        if( !target ) target = offensive_target(me)
        if( !target || !target->is_character() || !me->is_fighting(target) )
                return notify_fail(玄铁只能对战斗中的对手使用。\n)

        if( me->query_temp(pxuantie))
                return notify_fail(你已在使用玄铁中了！\n)

        if( !objectp(weapon = me->query_temp(weapon) ) )
                return notify_fail(你未持武器，不能使用玄铁！\n)

        if( me->query_skill(force) < 200 )
                return notify_fail(你的玉女心经火候未到，无法施展玄铁！\n)

        if( me->query(neili) <= 1000 )
                return notify_fail(你的内力不够施展玄铁！\n)
        if( me->query(jingli) <= 1000 )
                return notify_fail(你的精力不够施展玄铁！\n)



        write(Current Skill Level Is  + myskill+\n)




        weapon->set(no_get, 这样东西不能离开那儿。\n)
        weapon->set(no_drop,这样东西不能离开你。\n)

        if ( me->query_skill(xuantie-jian, 1) > 270)
        {
        msg += HIY只见$N手中剑灰色的剑影闪动，犹如是一把无锋重剑，雷声潮声一同滚滚而来，剑到之处无所不摧！\nNOR
        message_vision(msg+\n, me, target)

               if ( weapon->query(rigidity) < 100 )
                {
                weapon->add(rigidity, 1000+skill)
                weapon->set_temp(pxuantie, 1)
                }


                else if ( weapon->query(rigidity) < 500 )
                {
                     weapon->add(rigidity, 600+skill)
                     weapon->set_temp(pxuantie, 2)
                }


                else if ( weapon->query(rigidity) < 1000 )
                {
                     weapon->add(rigidity, 550+skill)
                     weapon->set_temp(pxuantie, 3)
                }
                else
